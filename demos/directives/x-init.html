<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>x-init Demo</title>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        .demo { background: #f5f5f5; padding: 20px; margin: 20px 0; border-radius: 8px; }
        h1 { color: #333; }
        h2 { color: #666; margin-top: 30px; }
        .explanation { background: #e3f2fd; padding: 15px; margin: 10px 0; border-left: 4px solid #2196f3; }
        a { display: inline-block; margin-top: 20px; color: #2196f3; }
    </style>
</head>
<body>
    <h1>x-init Directive</h1>

    <div class="explanation">
        <strong>What is x-init?</strong>
        <p>x-init runs code when a component is initialized. It's useful for setting up initial state, fetching data, or running setup logic.</p>
    </div>

    <h2>Example 1: Simple Initialization</h2>
    <div class="demo" x-data="{ message: '' }" x-init="message = 'Component initialized at ' + new Date().toLocaleTimeString()">
        <p x-text="message"></p>
    </div>
    <div class="explanation">
        <strong>Explanation:</strong> x-init sets the message when the component loads. This runs once during component initialization.
    </div>

    <h2>Example 2: Fetch Data on Init</h2>
    <div class="demo" x-data="{ user: null, loading: true }" x-init="
        fetch('https://jsonplaceholder.typicode.com/users/1')
            .then(response => response.json())
            .then(data => {
                user = data;
                loading = false;
            })
    ">
        <div x-show="loading">Loading user data...</div>
        <div x-show="!loading && user">
            <h3>User Details</h3>
            <p><strong>Name:</strong> <span x-text="user?.name"></span></p>
            <p><strong>Email:</strong> <span x-text="user?.email"></span></p>
            <p><strong>Phone:</strong> <span x-text="user?.phone"></span></p>
            <p><strong>Company:</strong> <span x-text="user?.company?.name"></span></p>
        </div>
    </div>
    <div class="explanation">
        <strong>Explanation:</strong> x-init can fetch data from APIs. The loading state provides user feedback during the fetch.
    </div>

    <h2>Example 3: Multiple Initialization Steps</h2>
    <div class="demo" x-data="{
        step1: false,
        step2: false,
        step3: false,
        logs: []
    }" x-init="
        logs.push('Starting initialization...');
        step1 = true;
        logs.push('Step 1 complete');
        setTimeout(() => {
            step2 = true;
            logs.push('Step 2 complete (after 1s)');
        }, 1000);
        setTimeout(() => {
            step3 = true;
            logs.push('Step 3 complete (after 2s)');
        }, 2000);
    ">
        <h3>Initialization Progress</h3>
        <p>Step 1: <span x-text="step1 ? '✓ Complete' : '○ Pending'"></span></p>
        <p>Step 2: <span x-text="step2 ? '✓ Complete' : '○ Pending'"></span></p>
        <p>Step 3: <span x-text="step3 ? '✓ Complete' : '○ Pending'"></span></p>
        <h4>Log:</h4>
        <ul>
            <template x-for="log in logs" :key="log">
                <li x-text="log"></li>
            </template>
        </ul>
    </div>
    <div class="explanation">
        <strong>Explanation:</strong> x-init can contain multiple statements and asynchronous operations. Reload the page to see the initialization sequence again.
    </div>

    <h2>Example 4: Initialize with Method Call</h2>
    <div class="demo" x-data="{
        currentTime: '',
        updateTime() {
            this.currentTime = new Date().toLocaleTimeString();
        },
        init() {
            this.updateTime();
            setInterval(() => this.updateTime(), 1000);
        }
    }" x-init="init()">
        <h3>Current Time</h3>
        <p x-text="currentTime" style="font-size: 24px; font-weight: bold;"></p>
    </div>
    <div class="explanation">
        <strong>Explanation:</strong> x-init can call methods defined in x-data. Here we use an init() method to start a clock that updates every second.
    </div>

    <a href="../../index.html">← Back to All Demos</a>
</body>
</html>
